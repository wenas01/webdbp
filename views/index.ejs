<!-- 
  Archivo: index.ejs
-->

<!DOCTYPE html>
<html lang="es-PE">

<head>
	<%- include('partials/head') %>
</head>

<body>
	<%- include('partials/header') %>
	<!-- SEO -->
	  <meta name="description" content="Consejos para manejar el estrés académico con técnicas de estudio, organización del tiempo y más.">
	  <meta name="keywords" content="estrés académico, técnicas de estudio, pomodoro, organización, salud mental, estudiantes">
	  <meta name="author" content="Estres Academico">
	  <meta name="robots" content="index, follow">
	  <meta property="og:title" content="Consejos para el Estrés Académico">
	  <meta property="og:description" content="Descubre cómo mejorar tu bienestar académico con estrategias efectivas.">
	  <meta property="og:type" content="website">
	  <meta property="og:url" content="https://estresa.netlify.app/">
	<div class="container">
		<!-- SECCIÓN CAUSAS - Ahora ocupa todo el ancho -->
		<div class="section">
    <h3><i class="fas fa-search"></i> CAUSAS</h3>
    <p>El estrés académico puede ser causado por diversas razones, como la presión por obtener buenas
        calificaciones, la carga excesiva de trabajo, la falta de organización y la ansiedad por los exámenes.</p>
    
    <!-- Botón desplegable para videos -->
    <div class="video-toggle-section">
        <button class="video-toggle-btn" onclick="toggleVideos('causas')">
            <i class="fas fa-video"></i> Ver Videos Relacionados
            <i class="fas fa-chevron-down toggle-icon"></i>
        </button>
        
        <!-- Videos embebidos (inicialmente ocultos) -->
        <div class="video-grid" id="videos-causas" style="display: none;">
            <div class="video-card">
                <div class="video-title">Estrés ¿Causas?</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/P21av6o-qVY" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">Causas y consecuencias del estrés académico</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/8zVyYBEKtoU" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">¿Qué es el estrés académico? con el Dr. Alejandro Lanuque</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/rF-Vw2uR1LQ" 
                            allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Artículos y enlaces -->
    <div class="article-links">
        <div class="article-card">
            <a href="https://www.mariajesuscampos.es/el-estres-academico-causas/" target="_blank">
                <i class="fas fa-blog"></i>
                <span>Blog: Estrés académico - Causas</span>
            </a>
        </div>
        <div class="article-card">
            <a href="https://revmultimed.sld.cu/index.php/mtm/article/view/302/410" target="_blank">
                <i class="fas fa-file-alt"></i>
                <span>Artículo: Estrés académico - causas y consecuencias</span>
            </a>
        </div>
        <div class="article-card">
            <a href="https://uchile.cl/presentacion/centro-de-aprendizaje-campus-sur/Material-Autorregulacion-Emocional/reconocer-prevenir-y-afrontar-el-estres-academico" target="_blank">
                <i class="fas fa-university"></i>
                <span>Reconocer, prevenir y afrontar el estrés académico</span>
            </a>
        </div>
    </div>
</div>




        <!-- SECCIÓN SIGNOS DE ALERTA -->
        <div class="section warning-signs">
    <h3><i class="fas fa-exclamation-triangle"></i> SIGNOS DE ALERTA</h3>
    <p>Los signos de estrés académico incluyen dificultad para concentrarse, insomnio, fatiga, ansiedad,
        irritabilidad y disminución en el rendimiento académico.</p>
    
    <!-- Botón desplegable para videos -->
    <div class="video-toggle-section">
        <button class="video-toggle-btn" onclick="toggleVideos('signos')">
            <i class="fas fa-video"></i> Ver Videos Relacionados
            <i class="fas fa-chevron-down toggle-icon"></i>
        </button>
        
        <!-- Videos embebidos (inicialmente ocultos) -->
        <div class="video-grid" id="videos-signos" style="display: none;">
            <!-- Aquí van todos los 6 videos que ya tienes -->
            <div class="video-card">
                <div class="video-title">Señales de alerta escolar</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/q9tM64Meyj0" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">Los síntomas físicos más comunes del estrés</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/hP1kbyK39-A" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">Así afecta el ESTRÉS a nuestro CUERPO</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/Ox7_4rNkLHk" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">Síntomas del estrés</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/xzk-frBs9ro" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">10 signos que tu cuerpo tiene mucho estrés</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/X-T6Dqqy8gQ" 
                            allowfullscreen></iframe>
                </div>
            </div>
            
            <div class="video-card">
                <div class="video-title">¿Estrés académico?</div>
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/ewtMyjjuaRY" 
                            allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
		<!-- SECCIÓN FORO - Se mantiene al final -->
		<div class="section forum" id="foro">
			<h3>FORO DE DISCUSIÓN</h3>
			<div class="forum-header">
				<p>¡Bienvenido a nuestra comunidad! Comparte tus experiencias, haz preguntas y ayuda a otros estudiantes que
					están lidiando con el estrés académico.</p>
			</div>
		
			<div class="forum-actions">
				  <% if (user) { %>
				  <button class="btn btn-primary" id="new-topic-btn">
				    <i class="fas fa-plus"></i> Nuevo Tema
				  </button>
				<% } else { %>
				  <button class="btn btn-primary" id="new-topic-btn">
				    <i class="fas fa-plus"></i> Inicia sesion para publicar nuevos temas y comentar
				  </button>
				  <script>
				    document.getElementById('new-topic-btn').addEventListener('click', function () {
				      window.location.href = '/login';
				    });
				  </script>
				<% } %>

			</div>
		
			<div class="forum-topics">
				<% temas.forEach((tema) => { %>
					<div class="forum-topic" data-id="<%= tema.id %>">
						<div class="topic-title"><%= tema.title %></div>
						<div class="topic-meta">
							<div class="topic-author">
								<div class="topic-avatar"><%= tema.author.substring(0, 2).toUpperCase() %></div>
								<span><%= tema.author %></span>
							</div>
							<div class="topic-stats">
								<div class="topic-stat">
									<i class="far fa-comment"></i> <%= tema.comments ? tema.comments.length : 0 %> respuestas
								</div>
								<div class="topic-stat">
									<i class="far fa-clock"></i> <%= new Date(tema.createdAt).toLocaleDateString() %>
								</div>
							</div>
						</div>
						<div class="topic-content"><%= tema.content %></div>
						<div class="topic-tags">
							<% tema.tags.forEach(function(tag) { %>
								<span class="topic-tag"><%= tag %></span>
							<% }); %>
						</div>
		
						<div class="topic-replies">
							<% if (tema.comments && tema.comments.length > 0) { %>
								<% tema.comments.forEach(function(comment, index) { %>
									<div class="forum-reply <%= comment.accepted ? 'accepted-reply' : '' %>" data-id="<%= comment.id %>">
										<div class="reply-header">
											<div class="reply-avatar"><%= comment.author ? comment.author.substring(0, 2).toUpperCase() : 'UA' %></div>
											<span class="reply-username"><%= comment.author || 'Usuario Anónimo' %></span>
											<span class="reply-date"><%= new Date(comment.date).toLocaleDateString() %></span>
											<% if (comment.accepted) { %>
												<span class="accepted-badge">Respuesta aceptada</span>
											<% } %>
										</div>
										<div class="reply-content"><%= comment.text %></div>
										<div class="reply-actions">
										
										</div>
									</div>
								<% }); %>
							<% } %>
						</div>
		
						<div class="reply-form">
							<div class="form-group">
								<textarea class="comment-input" placeholder="Escribe tu respuesta..."></textarea>
							</div>
							<div class="form-actions">
								<button type="button" class="btn btn-secondary">Cancelar</button>
								<button type="button" class="btn btn-primary">Publicar respuesta</button>
							</div>
						</div>
					</div>
				<% }); %>
			</div>
	
		
			<!-- Formulario para nuevo tema (oculto inicialmente) -->
			<div class="new-topic-form" id="new-topic-form" style="display: none;">
				<div class="form-title">Crear nuevo tema de discusión</div>
				<div class="form-group">
					<label for="topic-title">Título del tema</label>
					<input type="text" id="topic-title" placeholder="Escribe un título claro y descriptivo">
				</div>
				<div class="form-group">
					<label for="topic-content">Contenido</label>
					<textarea id="topic-content" placeholder="Describe tu pregunta, experiencia o tema de discusión con detalle"></textarea>
				</div>
				<div class="form-group">
					<label for="topic-tags">Etiquetas (separadas por comas)</label>
					<input type="text" id="topic-tags" placeholder="Ej: exámenes, ansiedad, organización">
				</div>
				<div class="form-actions">
					<button class="btn btn-secondary" id="cancel-topic-btn">Cancelar</button>
					<button class="btn btn-primary">Publicar tema</button>
				</div>
			</div>
		</div>
	</div>

<footer>
    <div class="footer-container">
        <div class="footer-content">
            <!-- Sección Acerca de -->
            <div class="footer-section footer-about">
                <h4><i class="fas fa-graduation-cap"></i> Sobre Nosotros</h4>
                <p>Estamos comprometidos con ayudar a estudiantes a manejar el estrés académico mediante recursos, técnicas y una comunidad de apoyo.</p>
                <p>Tu bienestar académico es nuestra prioridad. Juntos podemos superar los desafíos del estrés estudiantil.</p>
            </div>

            <!-- Redes sociales -->
            <div class="footer-section social-section">
                <h4><i class="fas fa-share-alt"></i> Únete a la Comunidad</h4>
                <div class="social-links">
                    <a href="https://chat.whatsapp.com/KKZivfcXCQ0KZ2C8BEzQoQ" target="_blank" class="social-link whatsapp">
                        <img src="https://static.vecteezy.com/system/resources/previews/016/716/480/non_2x/whatsapp-icon-free-png.png" alt="WhatsApp" class="social-icon">
                        <span>WhatsApp</span>
                    </a>
                    <a href="https://discord.gg/SqwwJUnq" target="_blank" class="social-link discord">
                        <img src="https://static.vecteezy.com/system/resources/previews/023/986/612/non_2x/discord-logo-discord-logo-transparent-discord-icon-transparent-free-free-png.png" alt="Discord" class="social-icon">
                        <span>Discord</span>
                    </a>
                    <a href="https://t.me/ESTRESA_OFICIAL" target="_blank" class="social-link telegram">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/2048px-Telegram_logo.svg.png" alt="Telegram" class="social-icon">
                        <span>Telegram</span>
                    </a>
                </div>
            </div>
        </div>

        <hr class="footer-divider">

        <div class="footer-bottom">
            <p>&copy; 2025 Estrés Académico. Hecho para estudiantes de todo el mundo.</p>
        </div>
    </div>
</footer>

	<script>

	function toggleVideos(section) {
        const videosDiv = document.getElementById('videos-' + section);
        const toggleBtn = event.target.closest('.video-toggle-btn');
        
        if (videosDiv.style.display === 'none' || videosDiv.style.display === '') {
            videosDiv.style.display = 'grid';
            toggleBtn.innerHTML = '<i class="fas fa-video"></i> Ocultar Videos <i class="fas fa-chevron-up toggle-icon"></i>';
        } else {
            videosDiv.style.display = 'none';
            toggleBtn.innerHTML = '<i class="fas fa-video"></i> Ver Videos Relacionados <i class="fas fa-chevron-down toggle-icon"></i>';
        }
    }

		document.addEventListener('DOMContentLoaded', function() {
    const newTopicBtn = document.getElementById('new-topic-btn');
    const newTopicForm = document.getElementById('new-topic-form');
    const cancelTopicBtn = document.getElementById('cancel-topic-btn');
    const forumTopics = document.querySelector('.forum-topics');
    
    // Mostrar/ocultar formulario de nuevo tema
    newTopicBtn.addEventListener('click', function() {
        newTopicForm.style.display = 'block';
        newTopicBtn.style.display = 'none';
        newTopicForm.scrollIntoView({ behavior: 'smooth' });
    });

    cancelTopicBtn.addEventListener('click', function() {
        newTopicForm.style.display = 'none';
        newTopicBtn.style.display = 'block';
    });

    // Funcionalidad para guardar nuevo tema
    const publishTopicBtn = newTopicForm.querySelector('.btn.btn-primary');
    publishTopicBtn.addEventListener('click', function() {
        const titleInput = document.getElementById('topic-title').value.trim();
        const contentInput = document.getElementById('topic-content').value.trim();
        const tagsInput = document.getElementById('topic-tags').value.trim();
        
        if (titleInput && contentInput) {
            const newTopic = {
                title: titleInput,
                content: contentInput,
                tags: tagsInput.split(',').map(tag => tag.trim()),
                author: 'Usuario Anónimo', // Podrías cambiarlo si hay usuarios
                comments: [],
                createdAt: new Date().toISOString()
            };
            // Aquí en lugar de guardar en localStorage, deberías enviar el nuevo tema al servidor
            // mediante una petición POST
            fetch('/temas', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(newTopic)
            })
            .then(response => response.json())
            .then(data => {
                // Refrescar la página para mostrar el nuevo tema
                window.location.reload();
            })
            .catch(error => {
                console.error('Error al guardar el tema:', error);
                alert('Ocurrió un error al guardar el tema. Por favor, intenta de nuevo.');
            });

            newTopicForm.style.display = 'none';
            newTopicBtn.style.display = 'block';
            document.getElementById('topic-title').value = '';
            document.getElementById('topic-content').value = '';
            document.getElementById('topic-tags').value = '';
        } else {
            alert('Por favor, completa el título y contenido del tema.');
        }
    });

    // Función para manejar las respuestas a los temas
    document.querySelectorAll('.forum-topic').forEach(topicDiv => {
        const replyButton = topicDiv.querySelector('.reply-form .btn-primary');
        if (replyButton) {
            replyButton.addEventListener('click', function() {
                const textarea = topicDiv.querySelector('.reply-form textarea');
                const replyText = textarea.value.trim();
                const topicId = topicDiv.dataset.id; // Asumiendo que has añadido data-id al div del tema
                
                if (replyText && topicId) {
                    // Enviar respuesta al servidor
                    fetch(`/temas/${topicId}/comentarios`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            text: replyText,
                            date: new Date().toISOString()
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        // Refrescar la página para mostrar el nuevo comentario
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error al guardar el comentario:', error);
                        alert('Ocurrió un error al guardar el comentario. Por favor, intenta de nuevo.');
                    });
                    
                    textarea.value = '';
                }
            });
        }
    });

    // Simular "me gusta" en respuestas
    document.querySelectorAll('.reply-action').forEach(action => {
        if (action.querySelector('.fa-thumbs-up')) {
            action.addEventListener('click', function() {
                const countElement = action.querySelector('i').nextSibling;
                let count = parseInt(countElement.nodeValue.trim());
                countElement.nodeValue = ' ' + (count + 1);
                action.style.color = '#a93226';
                
                // Aquí podrías enviar una petición al servidor para registrar el "me gusta"
                // const replyId = action.closest('.forum-reply').dataset.id;
                // fetch(`/comentarios/${replyId}/like`, { method: 'POST' })
                //    .then(response => response.json())
                //    .catch(error => console.error('Error al dar like:', error));
            });
        }
    });
});
	</script>
</body>

</html>
